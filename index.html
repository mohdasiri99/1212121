<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุญุงูู ุฑุฎุตุฉ ุงููุฏุฑุจ ุงููุนุชูุฏ - ุงูุฅุตุฏุงุฑ ุงููุงูู</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #2980b9; 
            --accent-color: #e67e22; 
            --neutral-color: #bdc3c7;
            --text-color: #2c3e50;
            --bg-color: #f5f6fa;
            --success-color: #27ae60;
            --danger-color: #c0392b;
            --warning-btn-color: #f1c40f; 
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        /* --- ุดุงุดุฉ ุงูุจุฏุงูุฉ --- */
        #intro-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 20px;
            box-sizing: border-box;
            text-align: center;
        }

        .intro-box {
            max-width: 800px;
            background: #fff;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border: 2px solid var(--secondary-color);
        }

        .btn-start {
            background-color: var(--secondary-color);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 8px;
            font-size: 1.2em;
            cursor: pointer;
            margin-top: 20px;
            transition: transform 0.2s;
            font-weight: bold;
        }
        .btn-start:hover { transform: scale(1.05); }

        /* --- ุงูุชุฎุทูุท ุงูุฑุฆูุณู --- */
        .main-container {
            display: none;
            display: grid;
            grid-template-columns: 280px 1fr;
            height: 100vh;
        }

        /* --- ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ --- */
        .sidebar {
            background: white;
            padding: 20px;
            border-left: 1px solid #ddd;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            box-shadow: -2px 0 5px rgba(0,0,0,0.05);
        }

        .timer-box {
            background: var(--primary-color);
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-size: 1.8em;
            font-weight: bold;
            margin-bottom: 20px;
            letter-spacing: 2px;
        }

        .questions-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        .grid-item {
            aspect-ratio: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
            user-select: none;
        }

        .grid-item:hover { background-color: #ecf0f1; }
        .grid-item.active { border: 2px solid var(--secondary-color); font-weight: 900; box-shadow: 0 0 5px rgba(41, 128, 185, 0.5); }
        .grid-item.answered { background-color: var(--neutral-color); color: white; border-color: var(--neutral-color); }
        .grid-item.marked { background-color: var(--accent-color); color: white; border-color: var(--accent-color); }
        .grid-item.marked.answered { 
            background: linear-gradient(135deg, var(--neutral-color) 50%, var(--accent-color) 50%); 
        }

        /* --- ููุทูุฉ ุงูุณุคุงู --- */
        .content-area {
            padding: 40px;
            overflow-y: auto;
            max-width: 900px;
            margin: 0 auto;
            width: 100%;
            box-sizing: border-box;
        }

        .question-card {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            animation: fadeIn 0.3s ease-in-out;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .scenario-text {
            background: #f8f9fa;
            padding: 20px;
            border-right: 5px solid var(--secondary-color);
            margin-bottom: 25px;
            font-size: 1.1em;
            text-align: justify;
            line-height: 1.8;
            color: #34495e;
        }

        .question-text {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 25px;
            color: var(--primary-color);
        }

        .options-list { list-style: none; padding: 0; }

        .option-item {
            margin-bottom: 15px;
            padding: 15px 20px;
            border: 2px solid #eee;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .option-item:hover { border-color: var(--secondary-color); background: #f0f8ff; }
        .option-item.selected { border-color: var(--secondary-color); background: #e1f0fa; font-weight: bold; }
        
        .option-circle {
            width: 22px;
            height: 22px;
            border: 2px solid #ccc;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-shrink: 0;
        }
        .option-item.selected .option-circle { border-color: var(--secondary-color); }
        .option-item.selected .option-circle::after {
            content: '';
            width: 12px;
            height: 12px;
            background: var(--secondary-color);
            border-radius: 50%;
        }

        /* --- ุฃุฒุฑุงุฑ ุงูุชุญูู --- */
        .controls {
            margin-top: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 20px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1.1em;
            font-family: inherit;
            font-weight: bold;
            transition: filter 0.2s;
        }
        .btn:hover { filter: brightness(0.9); }

        /* ุงูุฃููุงู ุงููุฎุตุตุฉ ููุฃุฒุฑุงุฑ */
        #prev-btn {
            background-color: var(--warning-btn-color); /* ุฃุตูุฑ */
            color: #2c3e50;
            border: 1px solid #d4ac0d;
        }

        #next-btn {
            background-color: var(--secondary-color); /* ุฃุฒุฑู */
            color: white;
        }
        
        .btn-mark { 
            background: transparent; 
            border: 2px solid var(--accent-color); 
            color: var(--accent-color); 
            display: flex; align-items: center; gap: 8px;
            padding: 10px 20px;
        }
        .btn-mark:hover { background: #fff5e6; }
        .btn-mark.active { background: var(--accent-color); color: white; }

        .btn-finish { background: var(--success-color); color: white; width: 100%; margin-top: auto; }

        /* --- ุดุงุดุฉ ุงููุชุงุฆุฌ --- */
        #results-screen {
            display: none;
            padding: 40px;
            max-width: 1000px;
            margin: 0 auto;
        }

        .score-card {
            text-align: center;
            background: white;
            padding: 40px;
            border-radius: 15px;
            margin-bottom: 40px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .review-card {
            background: white;
            padding: 25px;
            margin-bottom: 25px;
            border-radius: 10px;
            border-right: 6px solid #ddd;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .review-card.correct { border-color: var(--success-color); }
        .review-card.wrong { border-color: var(--danger-color); }

        .justification {
            margin-top: 20px;
            padding: 20px;
            background: #fff8e1;
            border-radius: 8px;
            color: #7f6000;
            border: 1px solid #ffeeba;
        }

        /* --- ุงูุชุฌุงูุจ ูุน ุงูุฌูุงู --- */
        @media (max-width: 768px) {
            .main-container { grid-template-columns: 1fr; grid-template-rows: auto 1fr; }
            .sidebar { 
                padding: 10px; 
                max-height: 140px; 
                flex-direction: row; 
                align-items: center; 
                gap: 15px;
                order: -1; /* ุฑูุน ุงููุงุฆูุฉ ููุฃุนูู */
            }
            .timer-box { margin: 0; padding: 5px 15px; min-width: 80px; font-size: 1.2em; }
            .questions-grid { display: flex; overflow-x: auto; gap: 8px; padding-bottom: 5px; width: 100%; }
            .grid-item { min-width: 40px; height: 40px; flex-shrink: 0; }
            .btn-finish { width: auto; padding: 5px 15px; font-size: 0.9em; }
            
            .content-area { padding: 15px; }
            .controls { flex-wrap: wrap; gap: 10px; }
            .btn { width: 48%; padding: 10px; font-size: 0.9em; }
            #mark-btn { width: 100%; justify-content: center; order: -1; margin-bottom: 10px; }
        }
    </style>
</head>
<body>

    <div id="intro-screen">
        <div class="intro-box">
            <h1 style="color: var(--primary-color);">ูุญุงูู ุงุฎุชุจุงุฑ ุงูุฑุฎุต ุงูููููุฉ ูููุฏุฑุจูู</h1>
            <div style="text-align: right; margin: 30px 0; font-size: 1.1em;">
                <h3>ุนุฒูุฒู / ุนุฒูุฒุชู</h3>
                <p>ูุฐุง ุงูุงุฎุชุจุงุฑ ูููุฐุฌ ูุญุงูู ูุงุฎุชุจุงุฑ ุงูุฑุฎุต ุงูููููุฉ ูููุฏุฑุจูู ููุฏู ุฅูู ุงูุชุฏุฑูุจ ุนูู ุทุจูุนุฉ ุงูุชุนุงูู ูุน ุงูุฃุณุฆูุฉ ูุงูุชุฑููุฒ ุงูุฐููู ูุฅุฏุงุฑุฉ ุงูููุช ุจูุนุงููุฉ.</p>
                <div style="background: #eef2f3; padding: 15px; border-radius: 8px; margin: 20px 0;">
                    <ul style="list-style-type: none; padding: 0; margin: 0;">
                        <li>โฑ๏ธ <strong>ุงูููุช ุงููุฎุตุต:</strong> 27 ุฏูููุฉ (ุชูุงุฒูู).</li>
                        <li>๐ <strong>ุนุฏุฏ ุงูุฃุณุฆูุฉ:</strong> 25 ุณุคุงูุงู (ุณููุงุฑูููุงุช ูุชูุฏูุฉ).</li>
                        <li>๐ก <strong>ุงูุชุนูููุงุช:</strong> ูุฑุงุกุฉ ุงูููุงูู ุจุฏูุฉ ูุงุฎุชูุงุฑ ุงูุญู "ุงูุฃูุซุฑ ุงุญุชุฑุงููุฉ".</li>
                    </ul>
                </div>
            </div>
            <button class="btn-start" onclick="startTest()">ุงุจุฏุฃ ุงูุงุฎุชุจุงุฑ ุงูุขู</button>
        </div>
    </div>

    <div class="main-container" id="test-container">
        <aside class="sidebar">
            <div class="timer-box" id="timer">27:00</div>
            <div class="questions-grid" id="grid-container">
                </div>
            <button class="btn btn-finish" onclick="finishTest()">ุฅููุงุก ุงูุงุฎุชุจุงุฑ</button>
        </aside>

        <main class="content-area">
            <div id="question-container">
                </div>

            <div class="controls">
                <button class="btn" id="prev-btn" onclick="prevQuestion()">ุงูุณุงุจู</button>
                <button class="btn btn-mark" id="mark-btn" onclick="toggleMark()">
                    <span>๐ฉ</span> <span id="mark-text">ููุฒ ูููุฑุงุฌุนุฉ</span>
                </button>
                <button class="btn" id="next-btn" onclick="nextQuestion()">ุงูุชุงูู</button>
            </div>
        </main>
    </div>

    <div id="results-screen">
        <div class="score-card">
            <h2>ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ ุงูุชุฌุฑูุจู</h2>
            <h1 id="final-score" style="font-size: 4em; color: var(--secondary-color); margin: 20px 0;">0/25</h1>
            <p id="time-taken" style="font-size: 1.2em; color: #7f8c8d;">ุงูููุช ุงููุณุชุบุฑู: --:--</p>
            <button class="btn" style="background: var(--primary-color); color: white;" onclick="location.reload()">ุฅุนุงุฏุฉ ุงููุญุงููุฉ</button>
        </div>
        <div id="detailed-results">
            </div>
    </div>

    <script>
        // === ูุงุนุฏุฉ ุจูุงูุงุช ุงูุฃุณุฆูุฉ (25 ุณุคุงู ุดุงูู) ===
        const questionsDB = [
            // --- ุงููุฌุงู: ูุจุงุฏุฆ ุงูุชุฏุฑูุจ ูุชุนููู ุงููุจุงุฑ ---
            {
                id: 1,
                scenario: "ุฃุซูุงุก ุชูุฏููู ูุฏูุฑุฉ 'ุงูุชุฎุทูุท ุงูุงุณุชุฑุงุชูุฌู'ุ ุงุนุชุฑุถ ูุฏูุฑ ุชูููุฐู (ูุดุงุฑู) ูุฑุงุฑุงู ุนูู ุงูููุงุฐุฌ ุงููุธุฑูุฉ ูุณุชุดูุฏุงู ุจุฎุจุฑุชู ุงูุนูููุฉุ ููุง ุฃุซุฑ ุนูู ุณูุฑ ุงูุฏูุฑุฉ.",
                question: "ุจูุงุกู ุนูู ุฎุตุงุฆุต ุชุนููู ุงููุจุงุฑุ ูุง ุงูุชุตุฑู ุงูุฃูุซุฑ ุงุญุชุฑุงููุฉุ",
                options: ["ุชุฌุงูู ุงุนุชุฑุงุถุงุชู ููุญูุงุธ ุนูู ุงูููุช.", "ุงูุฏุฎูู ูู ุฌุฏุงู ุนููู ูุฅุซุจุงุช ุตุญุฉ ุงููุธุฑูุงุช.", "ุงุณุชุซูุงุฑ ุงุนุชุฑุงุถู ุจุฏูุฌ ุฎุจุฑุชู ูุฏุฑุงุณุฉ ุญุงูุฉ ููููุงูุดุฉ.", "ุชุฐููุฑู ุจููุงุนุฏ ุงูุฏูุฑุฉ ูููุน ุงูููุงุทุนุฉ."],
                correct: 2,
                rationale: "ุงููุจุงุฑ ูุชุนูููู ุจุงููุดุงุฑูุฉ. ุงุณุชุฑุงุชูุฌูุฉ ุงูุชูุณูุฑ ุชูุชุถู ุงุญุชูุงุก ุงูุฎุจุฑุงุช ูุงุณุชุซูุงุฑูุง ููุตุฏุฑ ุฅุซุฑุงุก ุจุฏูุงู ูู ุงูุตุฏุงู."
            },
            {
                id: 2,
                scenario: "ุทูุจ ููู ุนููู ุฏูุฌ ููุธููู ูุฏุงูู (ููุงูููู ููุชุบููุฑ) ูููุธููู ุฌุฏุฏ (ุชููููู) ูู ูุงุนุฉ ูุงุญุฏุฉ ูุชุฏุฑูุจ ุชููู.",
                question: "ูุง ุงูุงุณุชุฑุงุชูุฌูุฉ ุงูุฃูุณุจ ูุฑุฏู ุงููุฌูุฉ ูุชูุนูู ุงูุชุฏุฑูุจุ",
                options: ["ุงูุชุฏุฑูุณ ุจุงููุณุชูู ุงููุชูุณุท.", "ุงูุชุนูู ุจุงูุฃูุฑุงู (Peer Learning) ุนุจุฑ ูุฌููุนุงุช ูุฎุชูุทุฉ.", "ุงูุชุฑููุฒ ุนูู ุงููุธุฑู ููุท.", "ูุตููู ูู ูุฌููุนุชูู ูุณุชููุชูู."],
                correct: 1,
                rationale: "ุงูุชุนูู ุจุงูุฃูุฑุงู ูุญูู ููู ุงูุฎุจุฑุฉ ุงูุถูููุฉ ูู ุงููุฏุงูู ูุงูููุงุฑุฉ ุงูุชูููุฉ ูู ุงูุฌุฏุฏุ ููุนุฒุฒ ุงูุฏูุฌ ุงูุงุฌุชูุงุนู."
            },
            {
                id: 3,
                scenario: "ุงูุฎูุถุช ุทุงูุฉ ุงููุชุฏุฑุจูู ุจุดูู ุญุงุฏ ุจุนุฏ ุงุณุชุฑุงุญุฉ ุงูุบุฏุงุกุ ูุงูููุถูุน ุงููุชุจูู ูุธุฑู ูุฏุณู.",
                question: "ูููุงู ูููุญูู ุงููุดุงุท ุงูุญูููุ ููู ุชุชุตุฑูุ",
                options: ["ุฑูุน ุงูุตูุช ูุฒูุงุฏุฉ ุงูุญุฑูุฉ.", "ุงุณุชุจุฏุงู ุงููุญุชูู ุจูุนุจุฉ ุชุฑููููุฉ.", "ุชุญููู ุงููุญุชูู ููุฑุดุฉ ุนูู ูุดุทุฉ (ูุซู ุงูุฌูุบุณู).", "ููุญ ุงุณุชุฑุงุญุฉ ุฅุถุงููุฉ."],
                correct: 2,
                rationale: "ูุชุฑุฉ ุงูุฑููุฏ ุชุชุทูุจ 'ุงูุชุนูู ุงููุดุท' ูุฅุดุฑุงู ุงูุนูู ูุงูุฌุณุฏุ ูููุณ ูุฌุฑุฏ ุงูุชุฑููู ุงูุฐู ูุถูุน ุงููุญุชูู."
            },
            {
                id: 4,
                scenario: "ุณูุฆูุช ุณุคุงูุงู ุชุฎุตุตูุงู ุฏูููุงู ุฌุฏุงู ูุง ุชุนุฑู ุฅุฌุงุจุชู.",
                question: "ูุง ุงูุฑุฏ ุงูุฐู ูุญุงูุธ ุนูู ุงููุตุฏุงููุฉ ุงูููููุฉุ",
                options: ["ุชุฃููู ุฅุฌุงุจุฉ ููุทููุฉ.", "ุงูุงุนุชุฑุงู ุจุนุฏู ุงููุนุฑูุฉ ูุงููุนุฏ ุจุงูุจุญุซ.", "ุฅุนุงุฏุฉ ุงูุณุคุงู ูููุชุฏุฑุจ ูุชููููู.", "ุชุฃุฌูู ุงูุฅุฌุงุจุฉ ููุชูุฑุจ."],
                correct: 1,
                rationale: "ุงูุงุนุชุฑุงู ุจุญุฏูุฏ ุงููุนุฑูุฉ ูุน ุงูุงูุชุฒุงู ุจุงูุจุญุซ ูุนุฒุฒ ุงูุซูุฉ ูุงููุตุฏุงููุฉ ุฃูุซุฑ ูู ุงูุงุฏุนุงุก."
            },
            {
                id: 5,
                scenario: "ูุชุฏุฑุจ ูู TOT ุฃุฏุงุคู ุงูุนุฑุถู ููุชุงุฒ ููู ูุญุชูุงู ุงูุนููู ูุงุฑุซู ููุบููุท.",
                question: "ููู ุชุทุจู ูููุฐุฌ ุงูุณุงูุฏูุชุด (Sandwich) ูู ุงูููุฏุ",
                options: ["ููุฏ ุงูุฎุทุฃ ุงูุนููู ููุฑุงู ูุฎุทูุฑุชู.", "ูุฏุญ ุงูุนุฑุถุ ุซู ุชุตุญูุญ ุงููุนูููุงุช ุจูุถูุญุ ุซู ุงูุชุญููุฒ.", "ุชุฌุงูู ุงูุฎุทุฃ ุงูุนููู.", "ุทูุจ ุฑุฃู ุงูุฌูููุฑ."],
                correct: 1,
                rationale: "ุงูุณุงูุฏูุชุด: ุทุจูุฉ ุฅูุฌุงุจูุฉ (ุงูุนุฑุถ)ุ ุทุจูุฉ ุงูููุฏ (ุงููุญุชูู)ุ ุทุจูุฉ ุฅูุฌุงุจูุฉ (ุงูุฏุนู ุงููุณุชูุจูู)."
            },
            
            // --- ุงููุฌุงู: ุงููุนุฑูุฉ ุงูููููุฉ (ุชุตููู ูุชูููู) ---
            {
                id: 6,
                scenario: "ุชุทูุฑ ุญููุจุฉ ูุชุฏุฑูุจ ุฅุฌุฑุงุกุงุช ุณูุงูุฉ ูุนูุฏุฉ ูุนูุงู ุงููุตุงูุน.",
                question: "ูููุงู ููุธุฑูุฉ ุงูุญูู ุงููุนุฑูู (Cognitive Load)ุ ูุง ุงูููุฌ ุงูุฃูุซูุ",
                options: ["ุนุฑุถ ูู ุงููุนูููุงุช ุฏูุนุฉ ูุงุญุฏุฉ.", "ุงุณุชุฎุฏุงู ุงูุชุฌุฒุฆุฉ (Chunking) ูุชูุณูู ุงููุนูููุงุช ููุญุฏุงุช ุตุบูุฑุฉ.", "ุงูุงุนุชูุงุฏ ุนูู ุงููุฑุงุกุฉ ุงูุฐุงุชูุฉ.", "ุงุณุชุฎุฏุงู ุงูุตูุฑ ุงููุนูุฏุฉ."],
                correct: 1,
                rationale: "ุงูุชุฌุฒุฆุฉ (Chunking) ุชููู ุงูุถุบุท ุนูู ุงูุฐุงูุฑุฉ ุงูุนุงููุฉ ูุชุณุงุนุฏ ูู ุงุณุชูุนุงุจ ุงูุฅุฌุฑุงุกุงุช ุงููุนูุฏุฉ."
            },
            {
                id: 7,
                scenario: "ูู ูููุฐุฌ ADDIEุ ุงูุชุดูุช ูู ูุฑุญูุฉ 'ุงูุชุทููุฑ' ุฃู ุงูุฃูุฏุงู ุงูุชู ูุถุนุช ูู 'ุงูุชุญููู' ุบูุฑ ูุงุจูุฉ ููููุงุณ.",
                question: "ูุง ุงูุฅุฌุฑุงุก ุงููุธุงูู ุงูุตุญูุญุ",
                options: ["ุฅููุงู ุงูุนูู ูุชุนุฏูู ุงูุชูููู.", "ุงูุนูุฏุฉ ููุฑุญูุฉ ุงูุชุตููู ูุตูุงุบุฉ ุงูุฃูุฏุงู ุณููููุงู.", "ูุนุงูุฌุฉ ุงูุฃูุฑ ุฃุซูุงุก ุงูุชูููุฐ.", "ุชุฌุงูู ุงูุฃูุฑ."],
                correct: 1,
                rationale: "ADDIE ูููุฐุฌ ุชูุฑุงุฑู. ูุณุงุฏ ุงูุฃุณุงุณ (ุงูุฃูุฏุงู) ููุณุฏ ุงูุจูุงุกุ ูุฐุง ูุฌุจ ุงูุนูุฏุฉ ูุชุตุญูุญูุง."
            },
            
            // --- ุชู ุชุนุฏูู ุงูุณุคุงู ุงูุซุงูู ููุง ---
            {
                id: 8,
                scenario: "ุจุนุฏ ุงูุชูุงุก ุจุฑูุงูุฌ ุชุฏุฑูุจู ูููุจูุนุงุชุ ุทูุจ ููู ุงููุฏูุฑ ุงูุชูููุฐู ูุนุงุฏูุฉ ุฑูุงุถูุฉ ุชูุถุญ ุงููููุฉ ุงููุงููุฉ ุงูุฏูููุฉ ุงูุชู ุนุงุฏุช ุนูู ุงูุดุฑูุฉ ููุงุจู ูู ุฑูุงู ุชู ุตุฑูู ุนูู ุงูุชุฏุฑูุจ.",
                question: "ูุฐุง ุงูุฅุฌุฑุงุก ููุซู ุฌููุฑ ูููุฐุฌ 'ุฌุงู ููููุจุณ'ุ ูููุน ูู ุฃู ูุณุชููุ",
                options: ["ุงููุณุชูู ุงูุซุงูุซ (ุงูุณููู).", "ุงููุณุชูู ุงูุฑุงุจุน (ุงููุชุงุฆุฌ).", "ุงููุณุชูู ุงูุฎุงูุณ (ุงูุนุงุฆุฏ ุนูู ุงูุงุณุชุซูุงุฑ ROI).", "ุงููุณุชูู ุงูุณุงุฏุณ (ุชุนุธูู ุงูุนุงุฆุฏ)."],
                correct: 2,
                rationale: "ุฌุงู ููููุจุณ ุทูุฑ ูููุฐุฌ ููุฑูุจุงุชุฑูู ูุฃุถุงู ุนููู 'ุงููุณุชูู ุงูุฎุงูุณ' ุงููุฎุตุต ุญุตุฑูุงู ูุญุณุงุจ ุงูุนุงุฆุฏ ุงููุงุฏู ุนูู ุงูุงุณุชุซูุงุฑ (ROI)."
            },

            {
                id: 9,
                scenario: "ุชุฑุบุจ ูู ููู ุงููุชุฏุฑุจูู ููุณุชูู 'ุงูุงุจุชูุงุฑ' (Create) ูู ูุฑู ุจููู.",
                question: "ุฃู ุงูุฃูุดุทุฉ ุงูุชุงููุฉ ูุญูู ุฐููุ",
                options: ["ุดุฑุญ ุงูููุงููู.", "ุชุทุจูู ูุนุงุฏูุฉ.", "ููุฏ ุฏุฑุงุณุฉ ุญุงูุฉ.", "ุชุตููู ูููุฐุฌ ุนูู ุฌุฏูุฏ ููุดุฑูุน ูุงุดุฆ."],
                correct: 3,
                rationale: "ุงูุชุตููู ูุงูุจูุงุก ูุงูุฅูุดุงุก ูู ุฃูุนุงู ูุณุชูู ุงูุงุจุชูุงุฑ (ููุฉ ุงููุฑู)."
            },

            // --- ุงููุฌุงู: ุงูููุงุฑุณุฉ ุงูููููุฉ (ุฅุฏุงุฑุฉ ุงููุงุนุฉ) ---
            {
                id: 10,
                scenario: "ูุดุงุฑู ุงูุชูุฏ ููุฑุฉ ุฒูููู ุจุญุฏุฉ ูุงุฆูุงู 'ููุฑุฉ ุบุจูุฉ' ุฃุซูุงุก ุฌูุณุฉ ุนุตู ุฐููู.",
                question: "ููู ุชุชุฏุฎู ููุฏุฑุจุ",
                options: ["ุชุฌุงูู ุงููููู.", "ุชูุจูุฎู ุนููุงู.", "ุงูุชุฐููุฑ ุจูุงุนุฏุฉ 'ุชุฃุฌูู ุงูุญูู' ูุงูุชุฑููุฒ ุนูู ุงููู ูุง ุงูููู.", "ูุชุญ ุจุงุจ ุงูุฌุฏุงู."],
                correct: 2,
                rationale: "ุญูุงูุฉ ุงูุจูุฆุฉ ุงูุขููุฉ ุดุฑุท ููุนุตู ุงูุฐููู. ุงูุชุฐููุฑ ุจุงูููุงุนุฏ ูุนูุฏ ุงูุงูุถุจุงุท ุฏูู ุดุฎุตูุฉ."
            },
            {
                id: 11,
                scenario: "ูุฌููุนุงุช ุงูุนูู ูู ุงููุงุนุงุช ุงูุงูุชุฑุงุถูุฉ (Breakout Rooms) ุตุงูุชุฉ ุชูุงูุงู.",
                question: "ูุง ุงูุชุฏุฎู ุงูุฃูุณุจุ",
                options: ["ุฅูุบุงุก ุงููุดุงุท.", "ุงูุฏุฎูู ูุชูุฌูู ุณุคุงู ูุจุงุดุฑ ูุงุณู ูุญุฏุฏ ูุชุญุฑูู ุงูููุงุด ุซู ุงูุงูุณุญุงุจ.", "ุงูุชูุฏูุฏ ุจุฎุตู ุงูุฏุฑุฌุงุช.", "ุชุฑููู ููุชุนูููุง ุฐุงุชูุงู."],
                correct: 1,
                rationale: "ุงูุชุฏุฎู ุงูููุฌู ููุณุฑ ุญุงุฌุฒ ุงูุตูุช ุงูุงูุชุฑุงุถู (Virtual Silence)."
            },
            {
                id: 12,
                scenario: "ูุชุฏุฑุจ 'ูุดุงูุณ' ูุญุงูู ุฅุญุฑุงุฌู ุจุฃุณุฆูุฉ ุชุนุฌูุฒูุฉ ุฎุงุฑุฌ ุงูููุถูุน.",
                question: "ูุง ุงูุชูุชูู ุงูุฃูุถู (Aikido)ุ",
                options: ["ุชุญุฏูู ูุฅุฌุงุจุชู.", "ุชุฌุงููู.", "ุฅุนุงุฏุฉ ุชูุฌูู ุงูุณุคุงู ููุฌูููุฑ (Relay) ูุจูุงู ุฑุฃููู.", "ุทุฑุฏู."],
                correct: 2,
                rationale: "ุฅุนุงุฏุฉ ุงูุชูุฌูู ุชุญูุฏ ุงููุดุงูุณ ูุชุดุฑู ุงูุฌูููุฑ ูุชุญูู ุงููุฏุฑุจ."
            },
            {
                id: 13,
                scenario: "ูุงุญุธุช ุฃู ููุท ุงูุชุนูู ุงูุณุงุฆุฏ ูู ุงููุงุนุฉ ูู ุงูููุท 'ุงูุญุณู/ุงูุจุตุฑู'.",
                question: "ููู ุชูููู ุนุฑุถู ุงูุชูุฏูููุ",
                options: ["ุฒูุงุฏุฉ ุงููุตูุต ูุงูุดุฑุญ ุงูุดููู.", "ุงุณุชุฎุฏุงู ุงููุฎุทุทุงุช ุงูุจูุงููุฉุ ุงูููุฏูููุงุชุ ูุงููุฌุณูุงุช.", "ุงูุชุฑููุฒ ุนูู ุงูููุงูุดุงุช ุงูููุณููุฉ.", "ุชูุฒูุน ูููุงุช ุตูุชูุฉ."],
                correct: 1,
                rationale: "ุงูุญุณููู ูุงูุจุตุฑููู ูุชุนูููู ุนุจุฑ ุงููุดุงูุฏุฉ ูุงูููุณุ ูุฐุง ุงููุณุงุฆุท ุงููุฑุฆูุฉ ูุงููุฌุณูุงุช ูู ุงูุฃูุฌุน."
            },

            // --- ุงููุฌุงู: ุงูููู ูุงููุณุคูููุงุช ุงูููููุฉ ---
            {
                id: 14,
                scenario: "ูุฌุฏุช ุญููุจุฉ ุชุฏุฑูุจูุฉ ุฌุงูุฒุฉ ุชุญุชูู ูุญุชูู ููุณูุฎุงู ุฏูู ุฐูุฑ ุงููุตุฏุฑ.",
                question: "ูุง ุงูุชุตุฑู ุงูุฃุฎูุงููุ",
                options: ["ุงุณุชุฎุฏุงููุง ููุง ูู.", "ุชุนุฏูู ุงูุตูุฑ ููุท.", "ุฅุนุงุฏุฉ ุตูุงุบุฉ ุงููุญุชูู ูุชูุซูู ุงููุตุงุฏุฑ ุงูุฃุตููุฉ.", "ุฐูุฑ ุงุณู ุจุงุฆุน ุงูุญููุจุฉ ููุตุฏุฑ."],
                correct: 2,
                rationale: "ุงูุฃูุงูุฉ ุงูุนูููุฉ ูุญููู ุงูููููุฉ ุงูููุฑูุฉ ูู ุตููู ุฃุฎูุงููุงุช ุงููููุฉ."
            },
            {
                id: 15,
                scenario: "ุงูุฏูุน ููุงุด ุณูุงุณู ุญุงุฏ ุจูู ุงููุชุฏุฑุจูู.",
                question: "ูุง ูู ุฏูุฑูุ",
                options: ["ุงููุดุงุฑูุฉ ุจุฑุฃูู.", "ุฅููุงู ุงูููุงุด ุจุญุฒู ูุนุฏู ุตูุชู ุจูุฏู ุงูุชุฏุฑูุจ.", "ุงูุณูุงุญ ุจู ูุชูุฑูุบ ุงูุทุงูุฉ.", "ุงูุชุตููุช ุนูู ุงูุฑุฃู ุงูุตุญูุญ."],
                correct: 1,
                rationale: "ุงูุญูุงุฏ ูุงูุชุฑููุฒ ุนูู ุงููุฏูุ ุงููุงุนุฉ ููุชุฏุฑูุจ ุงููููู ูููุณุช ููุจุฑุงู ุณูุงุณูุงู."
            },
            {
                id: 16,
                scenario: "ุนูุฑุถ ุนููู ุชุฏุฑูุจ ููุถูุน ูุง ุชุชููู ููุณุช ุฎุจูุฑุงู ููู.",
                question: "ูุง ุงููุฑุงุฑ ุงููููู ุงูุณูููุ",
                options: ["ุงููุจูู ูุงููุฑุงุกุฉ ุนูู ูุจู ุงูุฏูุฑุฉ.", "ุงูุงุนุชุฐุงุฑ ูุชุฑุดูุญ ุฒููู ูุฎุชุต.", "ุชูุธูู ูุฏุฑุจ ูู ุงูุจุงุทู.", "ุงููุจูู ูุงูุงุนุชูุงุฏ ุนูู ุงูุฃูุดุทุฉ."],
                correct: 1,
                rationale: "ุงูุงุนุชุฑุงู ุจุญุฏูุฏ ุงูููุงุกุฉ (Competence) ููุตูุญุฉ ุงูุนููู ููุฏูุฉ ุนูู ุงูุฑุจุญ ุงููุงุฏู."
            },
            {
                id: 17,
                scenario: "ูุฏูู ูุดุงุฑู ูู ุฐูู ุงูุฅุนุงูุฉ ุงูุญุฑููุฉ ูุง ูุณุชุทูุน ุชูููุฐ ูุดุงุท ููุฒ ุงูุญูุงุฌุฒ.",
                question: "ููู ุชุญูู ุงูุดููููุฉ (Inclusion)ุ",
                options: ["ุฅุนูุงุคู ูู ุงููุดุงุท.", "ุชูููู ุงููุดุงุท ุฃู ุฅูุฌุงุฏ ุฏูุฑ ุจุฏูู (ูุญูู ุฃู ููุฌู) ูุถูู ูุดุงุฑูุชู.", "ุฅุฌุจุงุฑ ุงููุฌููุนุฉ ุนูู ุญููู.", "ุฅูุบุงุก ุงููุดุงุท ููุฌููุน."],
                correct: 1,
                rationale: "ุงูุฏูุฌ ูุชุทูุจ ุชูููู ุงูุจูุฆุฉ ูุงูุฃูุดุทุฉ ูุชูุงุณุจ ุงูุฌููุนุ ูููุณ ุงูุนุฒู."
            },

            // --- ุงููุฌุงู: ููุงุฑุงุช ุงููุณุชูุจู ูุงูุชูููุฉ ---
            {
                id: 18,
                scenario: "ุชุณุชุฎุฏู ุงูุฐูุงุก ุงูุงุตุทูุงุนู (AI) ูุฅุนุฏุงุฏ ูุญุชูู ุงูุญููุจุฉ.",
                question: "ูุง ุงูููุงุฑุณุฉ ุงูุตุญูุญุฉ ูุถูุงู ุงูุฌูุฏุฉุ",
                options: ["ุงููุณุฎ ูุงููุตู ุงููุจุงุดุฑ.", "ุงุณุชุฎุฏุงูู ููุณูุฏุฉ ุฃูููุฉ ูุน ุงููุฑุงุฌุนุฉ ุงูุจุดุฑูุฉ ูุงูุชุญูู ูู ุงูุญูุงุฆู.", "ุงูุงุนุชูุงุฏ ุนููู ูู ุงููุตุงุฏุฑ ููุท.", "ุชุฌูุจู ุชูุงูุงู."],
                correct: 1,
                rationale: "ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุณุงุนุฏ (Co-pilot) ูููุณ ุจุฏููุงูุ ููุฌุจ ุงูุชุญูู ุงูุจุดุฑู ูุชูุงุฏู ุงููููุณุฉ."
            },
            {
                id: 19,
                scenario: "ุชุฑูุฏ ุชุทุจูู ุงูุชูุนูุจ (Gamification) ูุฒูุงุฏุฉ ุงูุชูุงุนู ูู ููุตุฉ ุฅููุชุฑูููุฉ.",
                question: "ูุง ุงูุนูุตุฑ ุงูุฃูู ููุฌุงุญ ุงูุชูุนูุจุ",
                options: ["ูุซุฑุฉ ุงูุฃููุงู.", "ูุฌูุฏ ูุธุงู ุงูููุงุท ูุงูุดุงุฑุงุช ูููุญุฉ ุงููุชุตุฏุฑูู (Leaderboard).", "ุงุณุชุฎุฏุงู ุฃุตูุงุช ูุถุญูุฉ.", "ุฅูุบุงุก ุงููุญุชูู ุงูุชุนูููู."],
                correct: 1,
                rationale: "ุนูุงุตุฑ ุงูุชูุนูุจ ุงูุฃุณุงุณูุฉ (PBL: Points, Badges, Leaderboards) ูู ูุญูุฒุงุช ุงูุชูุงูุณ ูุงูุฅูุฌุงุฒ."
            },
            {
                id: 20,
                scenario: "ุชุฏุฑูุจ ูุฌูู (Hybrid): ูุตู ุงูุญุถูุฑ ูู ุงููุงุนุฉ ููุตููู ุนุจุฑ Zoom.",
                question: "ูุง ุงูุชุญุฏู ุงูุฃูุจุฑ ุงูุฐู ูุฌุจ ุฃู ุชุฎุทุท ููุ",
                options: ["ุชูููุฑ ุงูุทุนุงู ููุฌููุน.", "ุถูุงู ุงูุนุฏุงูุฉ ูู ุงููุดุงุฑูุฉ ูุงูุงูุชุจุงู ููุทุฑููู ุจุงูุชุณุงูู.", "ุฅุฌุจุงุฑ ุญุถูุฑ ุงูุฃูููุงูู ุนูู ุงูุญุถูุฑ.", "ูุตู ุงูุชุฏุฑูุจูู."],
                correct: 1,
                rationale: "ุฎุทุฑ ุงูุชุฏุฑูุจ ุงููุฌูู ูู ูุณูุงู ุงูุญุถูุฑ ุนู ุจุนุฏ (Proximity Bias)ุ ูุฐุง ุงูุชุฎุทูุท ููุฏูุฌ ุถุฑูุฑู."
            },
            
            // --- ุฃุณุฆูุฉ ุฅุถุงููุฉ ---
            {
                id: 21,
                scenario: "ุชูููุช ุชููููุงุช ููุฎูุถุฉ ุฌุฏุงู ูู ููุงูุฉ ุงูุฏูุฑุฉ ุญูู 'ูุถูุญ ุงููุงุฏุฉ ุงูุนูููุฉ' ุฑุบู ุฃูู ุฎุจูุฑ ูููุง.",
                question: "ูุนูููุฉ ููู (Growth Mindset)ุ ูุงุฐุง ุชูุนูุ",
                options: ["ุชุจุฑูุฑ ุฐูู ุจุถุนู ูุณุชูู ุงููุชุฏุฑุจูู.", "ูุฑุงุฌุนุฉ ุชุตููู ุงูุญููุจุฉ ูุชุจุณูุท ุงููุบุฉ ูุงูููุงููู.", "ุชุฌุงูู ุงูุชููููุงุช.", "ุงูุชููู ุนู ุงูุชุฏุฑูุจ."],
                correct: 1,
                rationale: "ุงููุฏุฑุจ ุงููุญุชุฑู ูุชุญูู ูุณุคูููุฉ ุฅูุตุงู ุงููุนูููุฉุ ููุณุชุฎุฏู ุงูุชุบุฐูุฉ ุงูุฑุงุฌุนุฉ ููุชุทููุฑ."
            },
            {
                id: 22,
                scenario: "ุชุณุชุนุฏ ูุชุฏุฑูุจ ูู ุซูุงูุฉ ูุฎุชููุฉ ุชูุงูุงู ุนู ุซูุงูุชู.",
                question: "ูุง ุงูุฅุฌุฑุงุก ุงูุงุณุชุจุงูู ุงูุฃููุ",
                options: ["ุงุณุชุฎุฏุงู ููุณ ุงููุฒุงุญ ูุงููุตุต ุงููุนุชุงุฏุฉ.", "ุฏุฑุงุณุฉ ุงููุญุธูุฑุงุช ุงูุซูุงููุฉ (Taboos) ูุชูููู ุงูุฃูุซูุฉ ูุงููุบุฉ.", "ุงูุทูุจ ูููู ุงูุชุญุฏุซ ุจููุฌุชู.", "ุงูุชุฑููุฒ ุนูู ุงููุงุฏุฉ ุงูุนูููุฉ ููุท."],
                correct: 1,
                rationale: "ุงูุฐูุงุก ุงูุซูุงูู (CQ) ูุชุทูุจ ุงุญุชุฑุงู ูุชูููู ุงููุญุชูู ูุน ุณูุงู ุงูุฌูููุฑ."
            },
            {
                id: 23,
                scenario: "ูุฏูุฑ ุงูุชุฏุฑูุจ ูุทูุจ ููู ุชูููุต ุฏูุฑุฉ 3 ุฃูุงู ุฅูู ููู ูุงุญุฏ ูุถุบุท ุงููููุงุช.",
                question: "ููู ุชุญุงูุธ ุนูู ุงูุฌูุฏุฉุ",
                options: ["ุถุบุท ุงูุดุฑุงุฆุญ ูุงูุชุญุฏุซ ุจุณุฑุนุฉ.", "ุญุฐู ุงูุฃูุดุทุฉ ูุงูุชุทุจููุงุช.", "ุฅุนุงุฏุฉ ููุฏุณุฉ ุงููุญุชูู ููุชุฑููุฒ ุนูู 'ูุง ูุฌุจ ูุนุฑูุชู' ูุชุญููู ุงูุจุงูู ููุฑุงุฌุน.", "ุฑูุถ ุงูุชูููุฐ."],
                correct: 2,
                rationale: "ุงูุชุฑููุฒ ุนูู ุงูุฃูุฏุงู ุงูุญุฑุฌุฉ (Need to know vs Nice to know) ูู ุงูุญู ุนูุฏ ุถุบุท ุงูููุช."
            },
            {
                id: 24,
                scenario: "ุฃุซูุงุก ูุฑุดุฉ ุนููุ ูููู ุดุฎุต ูุงุญุฏ ุนูู ุงูุญุฏูุซ ููู ูุนุท ูุฑุตุฉ ููุขุฎุฑูู.",
                question: "ููู ุชุชุนุงูู ูุนูุ",
                options: ["ููุฑู ุจููุฉ.", "ุงุณุชุฎุฏุงู ูุบุฉ ุงูุฌุณุฏ (ุงูุงูุชุฑุงุจ ููู) ูุดูุฑู ุซู ููู ุงููููุฉ ูุบูุฑู ุจุงูุงุณู.", "ุชุฑูู ูุชุญุฏุซ ุญุชู ููู.", "ูุบุงุฏุฑุฉ ุงููุงุนุฉ."],
                correct: 1,
                rationale: "ุงูุงูุชุฑุงุจ ุงูุฌุณุฏู ูุงูุชุฏุฎู ุงูููุธู ุงููุจู (ุดูุฑุงู ููุ ูุณูุน ุงูุขู ูู ููุงู) ูููู ุงูููููุฉ ุจุฐูุงุก."
            },
            {
                id: 25,
                scenario: "ุชุฑูุฏ ุงูุชุฃูุฏ ูู ุงูุชูุงู ุฃุซุฑ ุงูุชุฏุฑูุจ (Transfer of Training) ุฅูู ุจูุฆุฉ ุงูุนูู ุจุนุฏ ุดูุฑ.",
                question: "ูุง ุงูุฃุฏุงุฉ ุงูุฃูุณุจุ",
                options: ["ุงุฎุชุจุงุฑ ูุฑูู ูู ููุงูุฉ ุงูุฏูุฑุฉ.", "ุงุณุชุจูุงู ุณุนุงุฏุฉ.", "ุฎุทุฉ ุนูู ุดุฎุตูุฉ (Action Plan) ูุน ูุชุงุจุนุฉ ูู ุงููุดุฑู ุงููุจุงุดุฑ.", "ุฅุนุงุฏุฉ ุงูุฏูุฑุฉ."],
                correct: 2,
                rationale: "ุฎุทุท ุงูุนูู ูุงููุชุงุจุนุฉ ุงูููุฏุงููุฉ ูู ุงูุฌุณุฑ ุงููุญูุฏ ุจูู ุงููุงุนุฉ ูุจูุฆุฉ ุงูุนูู."
            }
        ];

        // === ูุชุบูุฑุงุช ุงูุชุญูู ===
        let currentQuestionIndex = 0;
        let userAnswers = new Array(questionsDB.length).fill(null);
        let markedQuestions = new Set();
        let timerInterval;
        let timeRemaining = 27 * 60;
        let warningShown = false;

        // === ุนูุงุตุฑ DOM ===
        const introScreen = document.getElementById('intro-screen');
        const mainContainer = document.getElementById('test-container');
        const resultsScreen = document.getElementById('results-screen');
        const questionContainer = document.getElementById('question-container');
        const gridContainer = document.getElementById('grid-container');
        const timerDisplay = document.getElementById('timer');
        const markText = document.getElementById('mark-text');
        const markBtn = document.getElementById('mark-btn');

        // === ุงูุฏูุงู ุงูุชุดุบูููุฉ ===
        function startTest() {
            introScreen.style.display = 'none';
            mainContainer.style.display = 'grid';
            if(window.innerWidth <= 768) {
                mainContainer.style.display = 'flex';
                mainContainer.style.flexDirection = 'column';
            }
            initGrid();
            renderQuestion();
            startTimer();
        }

        function startTimer() {
            timerInterval = setInterval(() => {
                timeRemaining--;
                const minutes = Math.floor(timeRemaining / 60);
                const seconds = timeRemaining % 60;
                timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

                if (timeRemaining === 300 && !warningShown) {
                    alert("โ๏ธ ุชูุจูู: ุจูู ูู ุงูููุช 5 ุฏูุงุฆู ููุท!");
                    timerDisplay.style.color = "var(--danger-color)";
                    warningShown = true;
                }

                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    finishTest(true);
                }
            }, 1000);
        }

        function initGrid() {
            gridContainer.innerHTML = '';
            questionsDB.forEach((q, index) => {
                const item = document.createElement('div');
                item.className = 'grid-item';
                item.id = `grid-${index}`;
                item.textContent = index + 1;
                item.onclick = () => jumpToQuestion(index);
                if (index === 0) item.classList.add('active');
                gridContainer.appendChild(item);
            });
        }

        function renderQuestion() {
            const q = questionsDB[currentQuestionIndex];
            const isMarked = markedQuestions.has(currentQuestionIndex);
            
            markBtn.classList.toggle('active', isMarked);
            markText.textContent = isMarked ? "ุฅูุบุงุก ุชูููุฒ ุงูุณุคุงู" : "ููุฒ ูููุฑุงุฌุนุฉ";

            let html = `
                <div class="question-card">
                    <div style="display:flex; justify-content:space-between; margin-bottom:15px; color:#7f8c8d; font-size:0.9em;">
                        <span>ุงูุณุคุงู ${currentQuestionIndex + 1} ูู ${questionsDB.length}</span>
                        <span>${q.scenario.length > 100 ? 'ูููู ุชุฏุฑูุจู' : 'ุณุคุงู ูุจุงุดุฑ'}</span>
                    </div>
                    <div class="scenario-text">${q.scenario}</div>
                    <div class="question-text">${q.question}</div>
                    <ul class="options-list">
            `;

            q.options.forEach((opt, idx) => {
                const isSelected = userAnswers[currentQuestionIndex] === idx;
                html += `
                    <li class="option-item ${isSelected ? 'selected' : ''}" onclick="selectOption(${idx})">
                        ${opt}
                        <div class="option-circle"></div>
                    </li>
                `;
            });

            html += `</ul></div>`;
            questionContainer.innerHTML = html;
            updateGridStatus();
        }

        function selectOption(optionIndex) {
            userAnswers[currentQuestionIndex] = optionIndex;
            renderQuestion();
        }

        function toggleMark() {
            if (markedQuestions.has(currentQuestionIndex)) {
                markedQuestions.delete(currentQuestionIndex);
            } else {
                markedQuestions.add(currentQuestionIndex);
            }
            renderQuestion();
        }

        function updateGridStatus() {
            document.querySelectorAll('.grid-item').forEach(el => el.classList.remove('active'));
            const currentEl = document.getElementById(`grid-${currentQuestionIndex}`);
            if(currentEl) currentEl.classList.add('active');

            questionsDB.forEach((_, idx) => {
                const item = document.getElementById(`grid-${idx}`);
                item.className = 'grid-item';
                if (idx === currentQuestionIndex) item.classList.add('active');
                
                if (userAnswers[idx] !== null) item.classList.add('answered');
                if (markedQuestions.has(idx)) item.classList.add('marked');
            });
        }

        function nextQuestion() {
            if (currentQuestionIndex < questionsDB.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
            }
        }

        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
            }
        }

        function jumpToQuestion(index) {
            currentQuestionIndex = index;
            renderQuestion();
        }

        function finishTest(force = false) {
            if (!force) {
                const unanswered = userAnswers.filter(a => a === null).length;
                if (!confirm(`ูู ุฃูุช ูุชุฃูุฏ ูู ุฅููุงุก ุงูุงุฎุชุจุงุฑุ\nูุฏูู ${unanswered} ุฃุณุฆูุฉ ุบูุฑ ูุฌุงุจุฉ.`)) return;
            }
            
            clearInterval(timerInterval);
            mainContainer.style.display = 'none';
            resultsScreen.style.display = 'block';
            calculateResults();
        }

        function calculateResults() {
            let score = 0;
            let resultsHTML = '';

            questionsDB.forEach((q, index) => {
                const userChoice = userAnswers[index];
                const isCorrect = userChoice === q.correct;
                if (isCorrect) score++;

                const userChoiceText = userChoice !== null ? q.options[userChoice] : "ูู ูุชู ุงูุฅุฌุงุจุฉ";
                const correctChoiceText = q.options[q.correct];

                resultsHTML += `
                    <div class="review-card ${isCorrect ? 'correct' : 'wrong'}">
                        <h3 style="margin-top:0;">ุงูุณุคุงู ${index + 1}</h3>
                        <p class="scenario-text" style="font-size:0.95em; padding:10px; background:#f0f0f0; border:none;">${q.scenario}</p>
                        <p><strong>ุงูุณุคุงู:</strong> ${q.question}</p>
                        <p style="color: ${isCorrect ? 'var(--success-color)' : 'var(--danger-color)'}; font-weight:bold;">
                            ุฅุฌุงุจุชู: ${userChoiceText}
                        </p>
                        ${!isCorrect ? `<p style="color: var(--success-color); font-weight:bold;">โ ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ: ${correctChoiceText}</p>` : ''}
                        
                        <div class="justification">
                            <strong>๐ก ุงููุจุฑุฑ ุงูุชุฑุจูู:</strong><br>
                            ${q.rationale}
                        </div>
                    </div>
                `;
            });

            document.getElementById('final-score').textContent = `${score} / ${questionsDB.length}`;
            
            // ุญุณุงุจ ุงูููุช ุงููุณุชุบุฑู
            const timeSpent = (27 * 60) - timeRemaining;
            const minSpent = Math.floor(timeSpent / 60);
            const secSpent = timeSpent % 60;
            document.getElementById('time-taken').textContent = `ุงูููุช ุงููุณุชุบุฑู: ${minSpent} ุฏูููุฉ ู ${secSpent} ุซุงููุฉ`;

            document.getElementById('detailed-results').innerHTML = resultsHTML;
        }
    </script>
</body>
</html>
