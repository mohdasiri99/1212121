<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ù…Ø¹Ø±ÙØ© Ø§Ù„Ù…Ù‡Ù†ÙŠØ© ÙÙŠ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ - Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #0f172a;
            color: #f8fafc;
            overflow: hidden;
            user-select: none;
        }
        .glass-panel {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .nav-button:active {
            transform: scale(0.95);
        }
        /* Loading Spinner Animation */
        .loader {
            border: 4px solid rgba(255, 255, 255, 0.1);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border-left-color: #3b82f6;
            animation: spin 1s ease infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Icons (Ù†ÙØ³ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©) ---
        const Icons = {
            ArrowRight: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M5 12h14M12 5l7 7-7 7"/></svg>,
            ArrowLeft: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>,
            BookOpen: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>,
            Star: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>,
            CheckCircle: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>,
            Check: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="20 6 9 17 4 12"/></svg>,
            AlertTriangle: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>,
            Play: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="5 3 19 12 5 21 5 3"/></svg>
        };

        const Icon = ({ name, size = 24, className }) => {
            const IconComponent = Icons[name];
            return IconComponent ? <IconComponent width={size} height={size} className={className} /> : null;
        };

        // --- Slide Components (ØªÙ… Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ù‡Ø§ ÙƒÙ…Ø§ Ù‡ÙŠ Ù„Ø¶Ù…Ø§Ù† Ø¹Ù…Ù„ Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø³Ø§Ø¨Ù‚) ---
        // ... (CoverSlide, StandardSlide, ListSlide, CardsSlide, GridSlide, ProcessSlide, PyramidBloomSlide, PyramidTNASlide, TableSlide, WarningSlide)
        // Ù„ØªÙˆÙÙŠØ± Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ù‡Ù†Ø§ØŒ Ø§ÙØªØ±Ø¶ Ø£Ù† Ø¬Ù…ÙŠØ¹ Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ø´Ø±Ø§Ø¦Ø­ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ù…ÙˆØ¬ÙˆØ¯Ø© Ù‡Ù†Ø§.
        // Ø¥Ø°Ø§ ÙƒÙ†Øª Ø¨Ø­Ø§Ø¬Ø© Ù„Ù†Ø³Ø®Ù‡Ø§ ÙƒØ§Ù…Ù„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø£Ø®Ø¨Ø±Ù†ÙŠ. Ø³Ø£Ø¶Ø¹ ÙÙ‚Ø· Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù„Ù„ØªÙˆØ¶ÙŠØ­.

        const CoverSlide = ({ slide, onNext }) => (
             <div className="flex flex-col items-center justify-center h-full text-center space-y-8 animate-fade-in">
                <div className="w-24 h-2 bg-blue-500 rounded-full mb-4"></div>
                <h1 className="text-5xl md:text-7xl font-bold text-white tracking-tight leading-tight">{slide.title}</h1>
                <h2 className="text-2xl md:text-3xl text-blue-200 font-light max-w-3xl">{slide.subtitle}</h2>
                <div className="mt-8">
                    <button onClick={onNext} className="bg-blue-600 hover:bg-blue-700 text-white px-8 py-4 rounded-full text-xl font-bold shadow-lg flex items-center gap-3 transition-transform hover:scale-105 active:scale-95">
                        <Icon name="Play" size={28} /> Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¹Ø±Ø¶
                    </button>
                </div>
                <div className="mt-8 p-6 glass-panel rounded-xl border-t-4 border-blue-500">
                    <p className="text-xl font-bold text-white">{slide.author}</p>
                    <p className="text-gray-400">{slide.role}</p>
                </div>
            </div>
        );

        const StandardSlide = ({ slide }) => (
             <div className="flex flex-col h-full justify-center max-w-4xl mx-auto">
                <h2 className="text-4xl font-bold mb-12 text-blue-400 border-b border-gray-700 pb-4 flex items-center gap-3">
                   {slide.icon && <Icon name={slide.icon} />} {slide.title}
                </h2>
                <div className={`space-y-6 text-2xl leading-relaxed p-8 rounded-2xl glass-panel ${slide.accentColor || 'border-blue-500'}`}>
                    {slide.content.map((point, i) => (
                        <p key={i} className="flex items-start gap-3"><span className="text-blue-500 mt-1">â€¢</span>{point}</p>
                    ))}
                    {slide.highlight && <div className="mt-8 p-4 bg-blue-900/50 rounded-lg border border-blue-500/30 text-center text-blue-200 font-semibold">ğŸ’¡ {slide.highlight}</div>}
                </div>
            </div>
        );
        
        const ListSlide = ({ slide }) => (
            <div className="flex flex-col h-full justify-center max-w-4xl mx-auto">
                <h2 className="text-4xl font-bold mb-10 text-blue-400 border-b border-gray-700 pb-4">{slide.title}</h2>
                <div className="grid gap-6">
                    {slide.items.map((item, i) => (
                        <div key={i} className="flex items-center p-6 bg-slate-800 rounded-xl border border-slate-700 shadow-lg hover:border-blue-500 transition-colors">
                            <div className="w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-white font-bold ml-4 shrink-0">{i + 1}</div>
                            <p className="text-2xl text-slate-100">{item}</p>
                        </div>
                    ))}
                </div>
            </div>
        );

        const CardsSlide = ({ slide }) => (
             <div className="flex flex-col h-full justify-center">
                <h2 className="text-4xl font-bold mb-12 text-center text-blue-400">{slide.title}</h2>
                <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                    {slide.cards.map((card, i) => (
                        <div key={i} className="p-8 bg-slate-800 rounded-2xl border border-slate-700 hover:transform hover:-translate-y-2 transition-all duration-300 shadow-xl flex flex-col items-center text-center">
                            <div className="mb-4 text-blue-500"><Icon name="CheckCircle" size={40} /></div>
                            <h3 className="text-2xl font-bold text-white mb-3">{card.title}</h3>
                            <p className="text-gray-400 text-lg">{card.desc}</p>
                        </div>
                    ))}
                </div>
            </div>
        );

        const QuizSlide = ({ slide }) => {
            const [showAnswer, setShowAnswer] = useState(false);
            return (
                <div className="flex flex-col h-full justify-center max-w-4xl mx-auto w-full">
                    <div className="flex justify-between items-center mb-8 border-b border-gray-700 pb-4">
                        <h2 className="text-3xl font-bold text-yellow-400">{slide.title}</h2>
                        <span className="px-3 py-1 bg-blue-900 rounded text-sm text-blue-200">ØªØ¯Ø±ÙŠØ¨</span>
                    </div>
                    <p className="text-2xl mb-8 font-medium leading-relaxed">{slide.question}</p>
                    <div className="space-y-4 mb-8">
                        {slide.options.map((opt, i) => (
                            <div key={i} className={`p-4 rounded-lg border-2 transition-all duration-300 flex justify-between items-center ${showAnswer && opt.correct ? 'bg-green-900/40 border-green-500' : 'bg-slate-800 border-slate-700'} ${!showAnswer ? 'hover:border-blue-500 cursor-pointer' : ''}`}>
                                <span className="text-xl">{opt.text}</span>
                                {showAnswer && opt.correct && <Icon name="Check" className="text-green-400" />}
                            </div>
                        ))}
                    </div>
                    <div className="flex justify-between items-center">
                        <button onClick={() => setShowAnswer(!showAnswer)} className="px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-bold">{showAnswer ? 'Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©' : 'Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©'}</button>
                        {showAnswer && <div className="text-green-300 text-sm animate-pulse">Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù…ÙˆØ¶Ø­Ø© Ø¨Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø®Ø¶Ø±</div>}
                    </div>
                    <div className="mt-8 p-4 bg-slate-800/50 rounded border-r-4 border-yellow-500">
                        <p className="text-gray-300 text-sm">{slide.indicator}</p>
                    </div>
                </div>
            );
        };

        // --- Main App Component (Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù‡Ù†Ø§) ---
        const App = () => {
            // 1. Ø­Ø§Ù„Ø© Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Loading State)
            const [slidesData, setSlidesData] = useState([]);
            const [isLoading, setIsLoading] = useState(true);
            const [error, setError] = useState(null);

            // 2. Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ØªÙ‚Ø¯Ù… Ø§Ù„Ù…Ø­ÙÙˆØ¸ Ù…Ù† LocalStorage Ø¹Ù†Ø¯ Ø§Ù„Ø¨Ø¯Ø¡
            const savedProgress = localStorage.getItem('trainingProgressIndex');
            const initialSlide = savedProgress ? parseInt(savedProgress, 10) : 0;
            const [currentSlide, setCurrentSlide] = useState(initialSlide);

            // 3. Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ù…Ù„Ù JSON Ø¹Ù†Ø¯ ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
            useEffect(() => {
                fetch('slides.json')
                    .then(response => {
                        if (!response.ok) { throw new Error('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ù„Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (slides.json)'); }
                        return response.json();
                    })
                    .then(data => {
                        setSlidesData(data);
                        setIsLoading(false);
                        // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ø´Ø±ÙŠØ­Ø© Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© Ù„Ø§ ØªØªØ¬Ø§ÙˆØ² Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø´Ø±Ø§Ø¦Ø­
                        if (currentSlide >= data.length) {
                            setCurrentSlide(0);
                        }
                    })
                    .catch(err => {
                        setError(err.message);
                        setIsLoading(false);
                    });
            }, []);

            // 4. Ø¯Ø§Ù„Ø© Ù„Ø­ÙØ¸ Ø§Ù„ØªÙ‚Ø¯Ù… Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ø´Ø±ÙŠØ­Ø©
            const saveProgress = (index) => {
                localStorage.setItem('trainingProgressIndex', index);
            };

            const nextSlide = () => {
                if (currentSlide < slidesData.length - 1) {
                    const newIndex = currentSlide + 1;
                    setCurrentSlide(newIndex);
                    saveProgress(newIndex); // Ø­ÙØ¸ Ø§Ù„ØªÙ‚Ø¯Ù…
                }
            };

            const prevSlide = () => {
                if (currentSlide > 0) {
                    const newIndex = currentSlide - 1;
                    setCurrentSlide(newIndex);
                    saveProgress(newIndex); // Ø­ÙØ¸ Ø§Ù„ØªÙ‚Ø¯Ù…
                }
            };

            // Keyboard Navigation
            useEffect(() => {
                const handleKeyDown = (e) => {
                    if (slidesData.length === 0) return; // Ù„Ø§ ØªØªÙ†Ù‚Ù„ Ø¥Ø°Ø§ Ù„Ù… ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                    if (e.key === 'ArrowLeft' || e.key === ' ') nextSlide();
                    if (e.key === 'ArrowRight') prevSlide();
                };
                window.addEventListener('keydown', handleKeyDown);
                return () => window.removeEventListener('keydown', handleKeyDown);
            }, [currentSlide, slidesData]);


            const renderSlideContent = (slide) => {
                if (!slide) return null;
                switch (slide.type) {
                    case 'cover': return <CoverSlide slide={slide} onNext={nextSlide} />;
                    case 'list': return <ListSlide slide={slide} />;
                    case 'cards': return <CardsSlide slide={slide} />;
                    // ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© Ø¨Ù‚ÙŠØ© Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ Ù‡Ù†Ø§ (Grid, Process, Table...)
                    case 'quiz': return <QuizSlide slide={slide} />;
                    default: return <StandardSlide slide={slide} />;
                }
            };

            // --- Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø£Ùˆ Ø§Ù„Ø®Ø·Ø£ ---
            if (isLoading) {
                return (
                    <div className="h-screen w-screen flex flex-col items-center justify-center bg-slate-900 text-white">
                        <div className="loader mb-4"></div>
                        <p className="text-xl">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠ...</p>
                    </div>
                );
            }

            if (error) {
                return (
                    <div className="h-screen w-screen flex flex-col items-center justify-center bg-slate-900 text-red-400 p-8 text-center">
                        <Icon name="AlertTriangle" size={60} className="mb-4" />
                        <h2 className="text-3xl font-bold mb-2">Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£!</h2>
                        <p className="text-xl">{error}</p>
                        <p className="mt-4 text-gray-400 text-sm">ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø¹Ø¨Ø± Ø®Ø§Ø¯Ù… Ù…Ø­Ù„ÙŠ (Local Server) ÙˆÙ„ÙŠØ³ Ø¨ÙØªØ­Ù‡ Ù…Ø¨Ø§Ø´Ø±Ø©.</p>
                    </div>
                );
            }
            
            // --- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ---
            return (
                <div className="h-screen w-screen flex flex-col bg-slate-900 relative">
                    {/* Top Bar */}
                    <div className="absolute top-0 w-full p-4 flex justify-between items-center z-50 text-slate-500 text-sm px-8">
                        <div>Ø§Ù„Ø±Ø®ØµØ© Ø§Ù„Ù…Ù‡Ù†ÙŠØ© Ù„Ù„Ù…Ø¯Ø±Ø¨ÙŠÙ† (ÙˆØ¶Ø¹ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ)</div>
                        <div>{currentSlide + 1} / {slidesData.length}</div>
                    </div>

                    {/* Main Content Area */}
                    <div className="flex-1 flex items-center justify-center p-8 md:p-16 overflow-hidden relative">
                         {/* Background Blobs */}
                        <div className="absolute top-0 left-0 w-96 h-96 bg-blue-600/10 rounded-full blur-3xl -translate-x-1/2 -translate-y-1/2 pointer-events-none"></div>
                        <div className="absolute bottom-0 right-0 w-96 h-96 bg-indigo-600/10 rounded-full blur-3xl translate-x-1/2 translate-y-1/2 pointer-events-none"></div>

                        <div key={currentSlide} className="w-full h-full animate-fade-in">
                            {slidesData.length > 0 && renderSlideContent(slidesData[currentSlide])}
                        </div>
                    </div>

                    {/* Controls */}
                    <div className="absolute bottom-8 left-8 flex gap-4 z-50">
                        <button onClick={prevSlide} disabled={currentSlide === 0} className="nav-button p-4 bg-slate-800 rounded-full text-white hover:bg-blue-600 disabled:opacity-30 disabled:hover:bg-slate-800 transition-all border border-slate-700 shadow-lg">
                            <Icon name="ArrowRight" size={28} />
                        </button>
                        <button onClick={nextSlide} disabled={currentSlide === slidesData.length - 1} className="nav-button p-4 bg-slate-800 rounded-full text-white hover:bg-blue-600 disabled:opacity-30 disabled:hover:bg-slate-800 transition-all border border-slate-700 shadow-lg">
                            <Icon name="ArrowLeft" size={28} />
                        </button>
                    </div>
                    
                    {/* Progress Bar */}
                    <div className="absolute bottom-0 w-full h-1 bg-slate-800">
                        <div className="h-full bg-blue-500 transition-all duration-300 ease-out" style={{ width: `${((currentSlide + 1) / slidesData.length) * 100}%` }}></div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
